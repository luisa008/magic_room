<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
		</style>
	</head>
	<body>
		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/109/three.min.js"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/three@0.140/build/three.js"></script> -->
		<script src="js/three.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.140/examples/js/loaders/GLTFLoader.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.140/examples/js/controls/OrbitControls.js"></script>
		
		<!-- For Unreal Bloom Effect-->
		<script src="https://cdn.jsdelivr.net/npm/three@0.140/examples/js/shaders/CopyShader.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.140/examples/js/shaders/LuminosityHighPassShader.js"></script>
		<script type="text/js" src="https://cdn.jsdelivr.net/npm/three@0.140/examples/js/shaders/ShaderChunk/tonemapping_pars_fragment.glsl.js"></script>
		
		<script src="https://cdn.jsdelivr.net/npm/three@0.140/examples/js/postprocessing/Pass.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.140/examples/js/postprocessing/RenderPass.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.140/examples/js/postprocessing/ShaderPass.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.140/examples/js/postprocessing/EffectComposer.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.140/examples/js/postprocessing/UnrealBloomPass.js"></script>
	
		<script src="index.js"></script>
		<script src="js/room1.js"></script>
		<script src="js/room2.js"></script>
		<script src="js/control/keyboard.js"></script>
		<script src="js/control/mouse.js"></script>
		<script>
			function animate() {
				room1Animate();
				room2Animate();
			}
			function render(){
				requestAnimationFrame( render );
				animate();
				
				renderer.clear();
				camera.layers.set(1);
				if(bloomComposer) {
					// console.log("bloom");
					bloomComposer.render();
				}
				
				// // 清除深度缓存
				renderer.clearDepth();
				camera.layers.set(0);

				renderer.render(scene, camera);
			}
			render();
		</script>
	</body>
</html>